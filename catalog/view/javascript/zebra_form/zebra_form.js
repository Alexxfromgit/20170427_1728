(function(c){c.Zebra_DatePicker=function(W,E){var ja={always_show_clear:!1,always_visible:!1,days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),days_abbr:!1,direction:0,disabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear",months:"January February March April May June July August September October November December".split(" "),months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,show_icon:!0,show_week_number:!1,start_date:!1,view:"days", weekend_days:[0,6],zero_pad:!0,onChange:null,onClear:null,onSelect:null},q,g,s,z,B,F,G,I,X,Q,Z,p,t,y,u,m,R,J,K,Y,S,v,w,T,L,O,ca,da,ea,C,$,a=this;a.settings={};var n=c(W),ga=function(b){b||(a.settings=c.extend({},ja,E));a.settings.readonly_element&&n.attr("readonly","readonly");var d={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]},l=!1,f=!1,j=!1;for(type in d)c.each(d[type],function(b,c){-1<a.settings.format.indexOf(c)&&("days"==type?l=!0:"months"==type?f=!0:"years"==type&&(j= !0))});C=l&&f&&j?["years","months","days"]:!l&&f&&j?["years","months"]:!l&&!f&&j?["years"]:["years","months","days"];-1==c.inArray(a.settings.view,C)&&(a.settings.view=C[C.length-1]);Y=[];c.isArray(a.settings.disabled_dates)&&0<a.settings.disabled_dates.length&&c.each(a.settings.disabled_dates,function(){for(var a=this.split(" "),b=0;4>b;b++){a[b]||(a[b]="*");a[b]=-1<a[b].indexOf(",")?a[b].split(","):Array(a[b]);for(var d=0;d<a[b].length;d++)if(-1<a[b][d].indexOf("-")){var e=a[b][d].match(/^([0-9]+)\-([0-9]+)/); if(null!=e){for(var f=k(e[1]);f<=k(e[2]);f++)-1==c.inArray(f,a[b])&&a[b].push(f+"");a[b].splice(d,1)}}for(d=0;d<a[b].length;d++)a[b][d]=isNaN(k(a[b][d]))?a[b][d]:k(a[b][d])}Y.push(a)});var d=new Date,h=!a.settings.reference_date?n.data("zdp_reference_date")&&void 0!=n.data("zdp_reference_date")?n.data("zdp_reference_date"):d:a.settings.reference_date,e,A;w=v=void 0;p=h.getMonth();X=d.getMonth();t=h.getFullYear();Q=d.getFullYear();y=h.getDate();Z=d.getDate();if(!0===a.settings.direction)v=h;else if(!1=== a.settings.direction)w=h,O=w.getMonth(),L=w.getFullYear(),T=w.getDate();else if(!c.isArray(a.settings.direction)&&P(a.settings.direction)&&0<k(a.settings.direction)||c.isArray(a.settings.direction)&&(!0===a.settings.direction[0]||P(a.settings.direction[0])&&0<a.settings.direction[0]||(e=U(a.settings.direction[0])))&&(!1===a.settings.direction[1]||P(a.settings.direction[1])&&0<=a.settings.direction[1]||(A=U(a.settings.direction[1]))))v=e?e:new Date(t,p,y+(!c.isArray(a.settings.direction)?k(a.settings.direction): k(!0===a.settings.direction[0]?0:a.settings.direction[0]))),p=v.getMonth(),t=v.getFullYear(),y=v.getDate(),A&&+A>=+v?w=A:!A&&(!1!==a.settings.direction[1]&&c.isArray(a.settings.direction))&&(w=new Date(t,p,y+k(a.settings.direction[1]))),w&&(O=w.getMonth(),L=w.getFullYear(),T=w.getDate());else if(!c.isArray(a.settings.direction)&&P(a.settings.direction)&&0>k(a.settings.direction)||c.isArray(a.settings.direction)&&(!1===a.settings.direction[0]||P(a.settings.direction[0])&&0>a.settings.direction[0])&& (P(a.settings.direction[1])&&0<=a.settings.direction[1]||(e=U(a.settings.direction[1]))))w=new Date(t,p,y+(!c.isArray(a.settings.direction)?k(a.settings.direction):k(!1===a.settings.direction[0]?0:a.settings.direction[0]))),O=w.getMonth(),L=w.getFullYear(),T=w.getDate(),e&&+e<+w?v=e:!e&&c.isArray(a.settings.direction)&&(v=new Date(L,O,T-k(a.settings.direction[1]))),v&&(p=v.getMonth(),t=v.getFullYear(),y=v.getDate());if(D(t,p,y)){for(;D(t);)v?(t++,p=0):(t--,p=11);for(;D(t,p);)v?(p++,y=1):(p--,y=31), 11<p?(t++,p=0,y=1):0>p&&(t--,p=11,y=31);for(;D(t,p,y);)v?y++:y--;d=new Date(t,p,y);t=d.getFullYear();p=d.getMonth();y=d.getDate()}(e=U(n.val()||(a.settings.start_date?a.settings.start_date:"")))&&D(e.getFullYear(),e.getMonth(),e.getDate())&&n.val("");fa(e);if(!a.settings.always_visible&&(b||(a.settings.show_icon?(e='<button type="button" class="Zebra_DatePicker_Icon'+("disabled"==n.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>',s=c(e),a.icon=s,$=s.add(n)):$=n,$.bind("click", function(b){b.preventDefault();n.attr("disabled")||("none"!=g.css("display")?a.hide():a.show())}),void 0!=s&&s.insertAfter(W)),void 0!=s)){a.settings.inside&&s.addClass("Zebra_DatePicker_Icon_Inside");e=n.position();A=n.outerHeight(!1);var d=parseInt(n.css("marginTop"),10)||0,h=n.outerWidth(!1),r=parseInt(n.css("marginLeft"),10)||0,x=s.outerWidth(!0),V=s.outerHeight(!0);a.settings.inside?s.css({left:e.left+r+h-x,top:e.top+d+(A-V)/2}):s.css({left:e.left+h,top:e.top+(A-V)/2})}void 0!=s&&(n.is(":visible")? s.css("display","block"):s.css("display","none"));b||(e='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&laquo;</td><td class="dp_caption">&nbsp;</td><td class="dp_next">&raquo;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td>'+a.settings.lang_clear_date+"</td></tr></table></div>",g=c(e),a.datepicker=g,z=c("table.dp_header",g),B=c("table.dp_daypicker", g),F=c("table.dp_monthpicker",g),G=c("table.dp_yearpicker",g),I=c("table.dp_footer",g),a.settings.always_visible?n.attr("disabled")||(a.settings.always_visible.append(g),a.show()):c("body").append(g),g.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){c(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){c(this).removeClass("dp_hover")}), b=c("td",z),"firefox"==M.name?b.css("MozUserSelect","none"):"explorer"==M.name?b.bind("selectstart",function(){return!1}):b.mousedown(function(){return!1}),c(".dp_previous",z).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==q?m--:"years"==q?m-=12:0>--u&&(u=11,m--),N())}),c(".dp_caption",z).bind("click",function(){q="days"==q?-1<c.inArray("months",C)?"months":-1<c.inArray("years",C)?"years":"days":"months"==q?-1<c.inArray("years",C)?"years":-1<c.inArray("days",C)?"days":"months": -1<c.inArray("days",C)?"days":-1<c.inArray("months",C)?"months":"years";N()}),c(".dp_next",z).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==q?m++:"years"==q?m+=12:12==++u&&(u=0,m++),N())}),B.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){aa(m,u,k(c(this).html()),"days",c(this))}),F.delegate("td:not(.dp_disabled)","click",function(){var b=c(this).attr("class").match(/dp\_month\_([0-9]+)/);u=k(b[1]);-1==c.inArray("days", C)?aa(m,u,1,"months",c(this)):(q="days",a.settings.always_visible&&n.val(""),N())}),G.delegate("td:not(.dp_disabled)","click",function(){m=k(c(this).html());-1==c.inArray("months",C)?aa(m,1,1,"years",c(this)):(q="months",a.settings.always_visible&&n.val(""),N())}),c("td",I).bind("click",function(b){b.preventDefault();n.val("");a.settings.always_visible||(m=u=K=J=R=null,I.css("display","none"));a.hide();if(a.settings.onClear&&"function"==typeof a.settings.onClear)a.settings.onClear(n)}),a.settings.always_visible|| c(document).bind({mousedown:a._mousedown,keyup:a._keyup}),N())};a.hide=function(){a.settings.always_visible||(ha("hide"),g.css("display","none"))};a.show=function(){q=a.settings.view;var b=U(n.val()||(a.settings.start_date?a.settings.start_date:""));b?(J=b.getMonth(),u=b.getMonth(),K=b.getFullYear(),m=b.getFullYear(),R=b.getDate(),D(K,J,R)&&(n.val(""),u=p,m=t)):(u=p,m=t);N();if(a.settings.always_visible)g.css("display","block");else{var b=g.outerWidth(),d=g.outerHeight(),l=(void 0!=s?s.offset().left+ s.outerWidth(!0):n.offset().left+n.outerWidth(!0))+a.settings.offset[0],f=(void 0!=s?s.offset().top:n.offset().top)-d+a.settings.offset[1],j=c(window).width(),h=c(window).height(),e=c(window).scrollTop(),A=c(window).scrollLeft();l+b>A+j&&(l=A+j-b);l<A&&(l=A);f+d>e+h&&(f=e+h-d);f<e&&(f=e);g.css({left:l,top:f});g.fadeIn("explorer"==M.name&&9>M.version?0:150,"linear");ha()}};a.update=function(b){a.original_direction&&(a.original_direction=a.direction);a.settings=c.extend(a.settings,b);ga(!0)};var U= function(b){b+="";if(""!=c.trim(b)){var d;d=a.settings.format.replace(/\s/g,"").replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");for(var l="dDjlNSwFmMnYy".split(""),f=[],j=[],h=0;h<l.length;h++)-1<(position=d.indexOf(l[h]))&&f.push({character:l[h],position:position});f.sort(function(a,b){return a.position-b.position});c.each(f,function(a,b){switch(b.character){case "d":j.push("0[1-9]|[12][0-9]|3[01]");break;case "D":j.push("[a-z]{3}");break;case "j":j.push("[1-9]|[12][0-9]|3[01]");break;case "l":j.push("[a-z]+"); break;case "N":j.push("[1-7]");break;case "S":j.push("st|nd|rd|th");break;case "w":j.push("[0-6]");break;case "F":j.push("[a-z]+");break;case "m":j.push("0[1-9]|1[012]+");break;case "M":j.push("[a-z]{3}");break;case "n":j.push("[1-9]|1[012]");break;case "Y":j.push("[0-9]{4}");break;case "y":j.push("[0-9]{2}")}});if(j.length&&(f.reverse(),c.each(f,function(a,b){d=d.replace(b.character,"("+j[j.length-a-1]+")")}),j=RegExp("^"+d+"$","ig"),segments=j.exec(b.replace(/\s/g,"")))){var e,m,r,n="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "), V="January February March April May June July August September October November December".split(" "),g,p=!0;f.reverse();c.each(f,function(b,d){if(!p)return!0;switch(d.character){case "m":case "n":m=k(segments[b+1]);break;case "d":case "j":e=k(segments[b+1]);break;case "D":case "l":case "F":case "M":g="D"==d.character||"l"==d.character?a.settings.days:a.settings.months;p=!1;c.each(g,function(a,c){if(p)return!0;if(segments[b+1].toLowerCase()==c.substring(0,"D"==d.character||"M"==d.character?3:c.length).toLowerCase()){switch(d.character){case "D":segments[b+ 1]=n[a].substring(0,3);break;case "l":segments[b+1]=n[a];break;case "F":segments[b+1]=V[a];m=a+1;break;case "M":segments[b+1]=V[a].substring(0,3),m=a+1}p=!0}});break;case "Y":r=k(segments[b+1]);break;case "y":r="19"+k(segments[b+1])}});if(p&&(b=new Date(r,(m||1)-1,e||1),b.getFullYear()==r&&b.getDate()==(e||1)&&b.getMonth()==(m||1)-1))return b}return!1}},ia=function(){var b=(new Date(m,u+1,0)).getDate(),d=(new Date(m,u,1)).getDay(),l=(new Date(m,u,0)).getDate(),d=d-a.settings.first_day_of_week,d=0> d?7+d:d;ba(a.settings.months[u]+", "+m);var f="<tr>";a.settings.show_week_number&&(f+="<th>"+a.settings.show_week_number+"</th>");for(var j=0;7>j;j++)f+="<th>"+(c.isArray(a.settings.days_abbr)&&void 0!=a.settings.days_abbr[(a.settings.first_day_of_week+j)%7]?a.settings.days_abbr[(a.settings.first_day_of_week+j)%7]:a.settings.days[(a.settings.first_day_of_week+j)%7].substr(0,2))+"</th>";f+="</tr><tr>";for(j=0;42>j;j++){0<j&&0==j%7&&(f+="</tr><tr>");if(0==j%7&&a.settings.show_week_number){var h=new Date(m, u,j-d+1),e=h.getFullYear(),n=h.getMonth()+1,h=h.getDate(),r=void 0,k=void 0,g=void 0,p=g=void 0,q=void 0,g=k=r=void 0;3>n?(r=e-1,k=(r/4|0)-(r/100|0)+(r/400|0),g=((r-1)/4|0)-((r-1)/100|0)+((r-1)/400|0),g=k-g,p=0,q=h-1+31*(n-1)):(r=e,k=(r/4|0)-(r/100|0)+(r/400|0),g=((r-1)/4|0)-((r-1)/100|0)+((r-1)/400|0),g=k-g,p=g+1,q=h+((153*(n-3)+2)/5|0)+58+g);r=(r+k)%7;h=(q+r-p)%7;k=q+3-h;g=0>k?53-((r-g)/5|0):k>364+g?1:(k/7|0)+1;f+='<td class="dp_week_number">'+g+"</td>"}e=j-d+1;j<d?f+='<td class="dp_not_in_month">'+ x(l-d+j+1,a.settings.zero_pad?2:0)+"</td>":e>b?f+='<td class="dp_not_in_month">'+x(e-b,a.settings.zero_pad?2:0)+"</td>":(n=(a.settings.first_day_of_week+j)%7,h="",D(m,u,e)?(h=-1<c.inArray(n,a.settings.weekend_days)?"dp_weekend_disabled":h+" dp_disabled",u==X&&(m==Q&&Z==e)&&(h+=" dp_disabled_current")):(-1<c.inArray(n,a.settings.weekend_days)&&(h="dp_weekend"),u==J&&(m==K&&R==e)&&(h+=" dp_selected"),u==X&&(m==Q&&Z==e)&&(h+=" dp_current")),f+="<td"+(""!=h?' class="'+c.trim(h)+'"':"")+">"+(a.settings.zero_pad? x(e,2):e)+"</td>")}B.html(c(f+"</tr>"));a.settings.always_visible&&(ca=c("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",B));B.css("display","")},ha=function(a){if("explorer"==M.name&&6==M.version){if(!S){var d=k(g.css("zIndex"))-1;S=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:d,position:"absolute",top:-1E3,left:-1E3,width:g.outerWidth(),height:g.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)", display:"none"}});c("body").append(S)}switch(a){case "hide":S.css("display","none");break;default:a=g.offset(),S.css({top:a.top,left:a.left,display:"block"})}}},D=function(b,d,l){if(c.isArray(a.settings.direction)||0!==k(a.settings.direction)){var f=k(H(b,"undefined"!=typeof d?x(d,2):"","undefined"!=typeof l?x(l,2):"")),j=(f+"").length;if(8==j&&("undefined"!=typeof v&&f<k(H(t,x(p,2),x(y,2)))||"undefined"!=typeof w&&f>k(H(L,x(O,2),x(T,2))))||6==j&&("undefined"!=typeof v&&f<k(H(t,x(p,2)))||"undefined"!= typeof w&&f>k(H(L,x(O,2))))||4==j&&("undefined"!=typeof v&&f<t||"undefined"!=typeof w&&f>L))return!0}if(Y){"undefined"!=typeof d&&(d+=1);var h=!1;c.each(Y,function(){if(!h&&(-1<c.inArray(b,this[2])||-1<c.inArray("*",this[2])))if("undefined"!=typeof d&&-1<c.inArray(d,this[1])||-1<c.inArray("*",this[1]))if("undefined"!=typeof l&&-1<c.inArray(l,this[0])||-1<c.inArray("*",this[0])){if("*"==this[3])return h=!0;var a=(new Date(b,d-1,l)).getDay();if(-1<c.inArray(a,this[3]))return h=!0}});if(h)return!0}return!1}, P=function(a){return(a+"").match(/^\-?[0-9]+$/)?!0:!1},ba=function(b){c(".dp_caption",z).html(b);if(c.isArray(a.settings.direction)||0!==k(a.settings.direction)){b=m;var d=u,l,f;"days"==q?(f=0>d-1?H(b-1,"11"):H(b,x(d-1,2)),l=11<d+1?H(b+1,"00"):H(b,x(d+1,2))):"months"==q?(f=b-1,l=b+1):"years"==q&&(f=b-7,l=b+7);D(f)?(c(".dp_previous",z).addClass("dp_blocked"),c(".dp_previous",z).removeClass("dp_hover")):c(".dp_previous",z).removeClass("dp_blocked");D(l)?(c(".dp_next",z).addClass("dp_blocked"),c(".dp_next", z).removeClass("dp_hover")):c(".dp_next",z).removeClass("dp_blocked")}},N=function(){if(""==B.text()||"days"==q){if(""==B.text()){a.settings.always_visible||g.css("left",-1E3);g.css({display:"block"});ia();var b=B.outerWidth(),d=B.outerHeight();z.css("width",b);F.css({width:b,height:d});G.css({width:b,height:d});I.css("width",b);g.css({display:"none"})}else ia();F.css("display","none");G.css("display","none")}else if("months"==q){ba(m);b="<tr>";for(d=0;12>d;d++){0<d&&0==d%3&&(b+="</tr><tr>");var l= "dp_month_"+d;D(m,d)?l+=" dp_disabled":!1!==J&&J==d?l+=" dp_selected":X==d&&Q==m&&(l+=" dp_current");b+='<td class="'+c.trim(l)+'">'+(c.isArray(a.settings.months_abbr)&&void 0!=a.settings.months_abbr[d]?a.settings.months_abbr[d]:a.settings.months[d].substr(0,3))+"</td>"}F.html(c(b+"</tr>"));a.settings.always_visible&&(da=c("td:not(.dp_disabled)",F));F.css("display","");B.css("display","none");G.css("display","none")}else if("years"==q){ba(m-7+" - "+(m+4));b="<tr>";for(d=0;12>d;d++)0<d&&0==d%3&&(b+= "</tr><tr>"),l="",D(m-7+d)?l+=" dp_disabled":K&&K==m-7+d?l+=" dp_selected":Q==m-7+d&&(l+=" dp_current"),b+="<td"+(""!=c.trim(l)?' class="'+c.trim(l)+'"':"")+">"+(m-7+d)+"</td>";G.html(c(b+"</tr>"));a.settings.always_visible&&(ea=c("td:not(.dp_disabled)",G));G.css("display","");B.css("display","none");F.css("display","none")}a.settings.onChange&&("function"==typeof a.settings.onChange&&void 0!=q)&&(b="days"==q?B.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):"months"== q?F.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):G.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"),b.each(function(){if("days"==q)c(this).data("date",m+"-"+x(u+1,2)+"-"+x(k(c(this).text()),2));else if("months"==q){var a=c(this).attr("class").match(/dp\_month\_([0-9]+)/);c(this).data("date",m+"-"+x(k(a[1])+1,2))}else c(this).data("date",k(c(this).text()))}),a.settings.onChange(q,b,n));(a.settings.always_show_clear||a.settings.always_visible|| ""!=n.val())&&"block"!=I.css("display")?I.css("display",""):I.css("display","none")},aa=function(b,d,l,f,j){var h=new Date(b,d,l,12,0,0);f="days"==f?ca:"months"==f?da:ea;var e;e="";for(var g=h.getDate(),k=h.getDay(),p=a.settings.days[k],q=h.getMonth()+1,t=a.settings.months[q-1],s=h.getFullYear()+"",v=0;v<a.settings.format.length;v++){var w=a.settings.format.charAt(v);switch(w){case "y":s=s.substr(2);case "Y":e+=s;break;case "m":q=x(q,2);case "n":e+=q;break;case "M":t=c.isArray(a.settings.months_abbr)&& void 0!=a.settings.months_abbr[q-1]?a.settings.months_abbr[q-1]:a.settings.months[q-1].substr(0,3);case "F":e+=t;break;case "d":g=x(g,2);case "j":e+=g;break;case "D":p=c.isArray(a.settings.days_abbr)&&void 0!=a.settings.days_abbr[k]?a.settings.days_abbr[k]:a.settings.days[k].substr(0,3);case "l":e+=p;break;case "N":k++;case "w":e+=k;break;case "S":e=1==g%10&&"11"!=g?e+"st":2==g%10&&"12"!=g?e+"nd":3==g%10&&"13"!=g?e+"rd":e+"th";break;default:e+=w}}n.val(e);a.settings.always_visible&&(J=h.getMonth(), u=h.getMonth(),K=h.getFullYear(),m=h.getFullYear(),R=h.getDate(),f.removeClass("dp_selected"),j.addClass("dp_selected"));a.hide();fa(h);if(a.settings.onSelect&&"function"==typeof a.settings.onSelect)a.settings.onSelect(e,b+"-"+x(d+1,2)+"-"+x(l,2),h,n)},H=function(){for(var a="",d=0;d<arguments.length;d++)a+=arguments[d]+"";return a},x=function(a,d){for(a+="";a.length<d;)a="0"+a;return a},k=function(a){return parseInt(a,10)},fa=function(b){a.settings.pair&&c.each(a.settings.pair,function(){var a=c(this); !a.data||!a.data("Zebra_DatePicker")?a.data("zdp_reference_date",b):(a=a.data("Zebra_DatePicker"),a.update({reference_date:b,direction:0==a.settings.direction?1:a.settings.direction}),a.settings.always_visible&&a.show())})};a._keyup=function(b){("block"==g.css("display")||27==b.which)&&a.hide();return!0};a._mousedown=function(b){if("block"==g.css("display")){if(a.settings.show_icon&&c(b.target).get(0)===s.get(0))return!0;0==c(b.target).parents().filter(".Zebra_DatePicker").length&&a.hide()}return!0}; var M={init:function(){this.name=this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var d=0;d<a.length;d++){var c=a[d].string,f=a[d].prop;this.versionSearchString=a[d].versionSearch||a[d].identity;if(c){if(-1!=c.indexOf(a[d].subString))return a[d].identity}else if(f)return a[d].identity}},searchVersion:function(a){var c=a.indexOf(this.versionSearchString);if(-1!=c)return parseFloat(a.substring(c+ this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};M.init();ga()};c.fn.Zebra_DatePicker=function(W){return this.each(function(){if(void 0!=c(this).data("Zebra_DatePicker")){var E=c(this).data("Zebra_DatePicker");void 0!=E.icon&&E.icon.remove();E.datepicker.remove();c(document).unbind("keyup",E._keyup);c(document).unbind("mousedown",E._mousedown)}E= new c.Zebra_DatePicker(this,W);c(this).data("Zebra_DatePicker",E)})}})(jQuery);(function(d){d.Zebra_Form=function(v,z){var g=this,N={scroll_to_error:!0,tips_position:"left",close_tips:!0,validate_on_the_fly:!1,validate_all:!1,assets_path:null};g.settings={};var q={},I={},y={},E=[],m={},r={},A=!1,B=!1,s,l=d(v);g.filter_input=function(a,d,c){var e,b="";if(window.event)e=window.event.keyCode,d=window.event;else if(d)e=d.which;else return!0;switch(a){case "alphabet":b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";break;case "digits":case "number":case "float":b="0123456789";break;case "alphanumeric":b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";break;default:return!0}c&&(b+=c);d=d.srcElement?d.srcElement:d.target||d.currentTarget;if(null==e||0==e||8==e||9==e||13==e||27==e)return!0;e=String.fromCharCode(e);return-1<b.indexOf(e)||"number"==a&&"-"==e&&0==C(d)||"float"==a&&("-"==e&&0==C(d)||"."==e&&0!=C(d)&&null==d.value.match(/\./))?!0:!1};g.init=function(){g.settings=d.extend({},N,z);l.find("option.dummy").remove();d("div.error",l).each(function(){d("div.close a", d(this)).bind("click",function(b){b.preventDefault();d(this).closest("div.error").animate({height:0,opacity:0},250,function(){d(this).remove()})})});d(".control",l).each(function(){var b=d(this),a={id:b.attr("id"),type:F(b)},c=b.closest(".row");c.length&&b.bind({focus:function(){c.addClass("highlight")},blur:function(){c.removeClass("highlight")}});if(b.hasClass("inside")&&("text"==a.type||"password"==a.type||"textarea"==a.type)){var f=b.position(),e="text"==a.type||"password"==a.type?jQuery("<input>").attr({type:"text", "class":"Zebra_Form_Placeholder",autocomplete:"off",value:b.attr("title")}):jQuery("<textarea>").attr({"class":"Zebra_Form_Placeholder",autocomplete:"off"}).html(b.attr("title"));"password"==a.type&&b.css("fontFamily","inherit");e.css({display:"none",fontFamily:b.css("fontFamily"),fontSize:b.css("fontSize"),fontStyle:b.css("fontStyle"),fontWeight:b.css("fontWeight"),left:f.left,top:f.top,width:b.width()+(parseInt(b.css("borderLeftWidth"),10)||0)+(parseInt(b.css("borderRightWidth"),10)||0),height:b.height()+ (parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("borderBottomWidth"),10)||0),paddingTop:parseInt(b.css("paddingTop"),10)||0,paddingRight:parseInt(b.css("paddingRight"),10)||0,paddingBottom:parseInt(b.css("paddingBottom"),10)||0,paddingLeft:parseInt(b.css("paddingLeft"),10)||0,marginTop:parseInt(b.css("marginTop"),10)||0,marginRight:parseInt(b.css("marginRight"),10)||0,marginBottom:parseInt(b.css("marginBottom"),10)||0,marginLeft:parseInt(b.css("marginLeft"),10)||0}).insertAfter(b);b.removeAttr("title"); e.bind("focus",function(){b.focus()});b.bind({focus:function(){e.css("display","none")},blur:function(){""==d(this).val()&&e.css("display","block")}});b.data("Zebra_Form_Placeholder",e);E.push(b)}else b.hasClass("other")&&"select-one"==a.type&&(K(b),b.change(function(){K(b)}));"password"==a.type&&b.css("fontFamily","Verdana, Tahoma, Arial");!g.settings.clientside_disabled&&void 0!=typeof g.settings.validation_rules[a.id]&&g.register(b,!1);if(("text"==a.type||"textarea"==a.type||"password"==a.type)&& b.attr("maxlength"))if(b.data("maxlength",b.attr("maxlength")),b.bind("keyup",function(){var a=d(this),b=a.data("maxlength"),c=J(a);a.attr("maxlength",b-c);a.hasClass("show-character-counter")&&(a=b-c-a.val().length,G.html(0>a?"<span>"+a+"</span>":a))}),b.hasClass("show-character-counter")){var f=b.position(),G=jQuery("<div>",{"class":"Zebra_Character_Counter",css:{visibility:"hidden"}}).html(b.data("maxlength")).insertAfter(b);width=G.outerWidth();height=G.outerHeight();G.css({top:f.top+b.outerHeight()- height/1.5,left:f.left+b.outerWidth()-width/1.5,width:G.width(),visibility:"visible"});b.trigger("keyup")}if(("text"==a.type||"password"==a.type)&&b.data("prefix")){var f=b.position(),a=b.data("prefix"),L=decodeURIComponent(a.replace(/\+/g," ")).match(/^img\:(.*)/i),a=null!=L?jQuery("<img>",{src:L[1]}):jQuery("<div>",{css:{"font-family":b.css("fontFamily"),"font-size":b.css("fontSize")}}).html(decodeURIComponent(a.replace(/\+/g," ")));a.attr({"class":"Zebra_Form_Input_Prefix"}).css({position:"absolute", visibility:"hidden"}).insertAfter(b);a.css({top:f.top+Math.round((b.outerHeight()-a.outerHeight())/2),left:f.left+parseInt(b.css("paddingLeft"),10),visibility:"visible"});b.css({paddingLeft:"+="+a.outerWidth(!0),width:"-="+a.outerWidth(!0)})}});d("input.submit, input.image",l).bind("click",function(){l.data("zf_clicked_button",d(this).attr("id"))});for(var a in g.settings.validation_rules)for(var f in g.settings.validation_rules[a])"dependencies"==f&&function(){var b=g.settings.validation_rules[a][f]; "string"==typeof b[1]&&(b=b[0]);for(var c in b){var e=d('input[name="'+c+'"],select[name="'+c+'"],textarea[name="'+c+'"]',v);0==e.length&&(e=d('input[name="'+c+'[]"],select[name="'+c+'[]"],textarea[name="'+c+'[]"]',v));if(0<e.length){m[c]||(m[c]={conditions:{},elements:[],event:!1});-1==d.inArray(a,m[c].elements)&&m[c].elements.push(a);var j=w(b[c]),n=F(d(e[0]));m[c].conditions[j]||(m[c].conditions[j]=function(){var a=b[c],f=[];e.each(function(){switch(n){case "radio":case "checkbox":this.checked&& f.push(d(this).val());break;case "image":case "submit":l.data("zf_clicked_button")==d(this).attr("id")&&f.push("click");break;default:f.push(d(this).val())}});var g=!1;0<f.length&&(d.isArray(a)?d.each(a,function(b){var c=0;d.each(f,function(e){!d.isArray(a[b])&&f[e]==a[b]?g=!0:d.isArray(a[b])&&-1<d.inArray(f[e],a[b])&&c++});!g&&c==a[b].length&&(g=!0)}):d.each(f,function(b){a==f[b]&&(g=!0)}));return g})}}0<e.length&&!1==m[c].event&&(m[c].event=function(){d.each(m[c].elements,function(a){var b=g.settings.validation_rules[m[c].elements[a]].dependencies, f=!0;if("string"==typeof b[1]){var e=b[1].split(","),e=d.map(e,function(a){return d.trim(a)}),h=e.shift();arguments=e;b=b[0]}for(var j in b)e=w(b[j]),m[j].conditions[e]()||(f=!1);if(void 0!=b[c]&&void 0!=h){b=window;h=h.split(".");j=h.pop();for(e=0;e<h.length;e++)if(void 0!=b[h[e]])b=b[h[e]];else throw Error('"'+h[e]+"\" namespace doesn't exist in the global scope!");try{b[j].apply(void 0,[f].concat(arguments))}catch(n){throw Error('"'+j+'" callback function was not found!');}}})},e.bind("checkbox"== n||"radio"==n||"select-multiple"==n||"submit"==n||"button"==n?"click":"select-one"==n?"change":"blur",m[c].event));e.length&&m[c].event()}();var c=d(".captcha-container");if(0<c.length){var e=d("img",c);d("a",c).bind("click",function(a){a.preventDefault();e.attr("src",e.attr("src").replace(/nocache=[0-9]+/,"nocache="+ +new Date))})}l.bind("submit",function(a){!1==A&&(void 0!=g.settings.validation_rules&&!B)&&(g.validate()||a.preventDefault());B=!1});0<E.length&&setInterval(O,50);s={init:function(){this.name= this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var c=0;c<a.length;c++){var d=a[c].string,e=a[c].prop;this.versionSearchString=a[c].versionSearch||a[c].identity;if(d){if(-1!=d.indexOf(a[c].subString))return a[c].identity}else if(e)return a[c].identity}},searchVersion:function(a){var c=a.indexOf(this.versionSearchString);if(-1!=c)return parseFloat(a.substring(c+this.versionSearchString.length+ 1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};s.init();if("function"==typeof g.settings.on_ready)g.settings.on_ready()};g.attach_tip=function(a,d){var c=a.attr("id");q[c].message=d;g.show_errors(a)};g.clear_errors=function(){d(".Zebra_Form_error_iFrameShim").remove();d(".Zebra_Form_error_message").remove();y={}};g.end_file_upload=function(a,f){var c=d("#"+a);if(c.length&& (g.clear_errors(),l.removeAttr("target"),setTimeout(function(){d("#"+a+"_iframe").remove()},1E3),d("#"+a+"_spinner").remove(),void 0!=q[a]))if(void 0!=f&&("object"==typeof f&&void 0!=f[0]&&void 0!=f[1]&&void 0!=f[2]&&void 0!=f[3])&&c.data("file_info",f),!0!==g.validate_control(c))c.val(""),c.css("visibility","visible"),g.show_errors(c);else{var e=c.offset(),b=jQuery("<div>",{"class":"Zebra_Form_filename",css:{left:e.left,top:e.top,width:c.outerWidth(),opacity:0}}).html(f[0]),e=jQuery("<a>",{href:"javascript:void(0)"}).html("x").bind("click", function(a){a.preventDefault();b.remove();c.val("");c.data("file_info")&&c.removeData("file_info");c.css("visibility","visible")});d("body").append(b.append(e));b.css({top:parseInt(b.css("top"),10)+(c.outerHeight()-b.outerHeight())/2,opacity:1})}};g.hide_error=function(a,f){var c=d("#"+a);if(void 0==f&&g.settings.validate_on_the_fly&&!0!==g.validate_control(c))g.show_errors(c,!1);else{var e=d("#Zebra_Form_error_message_"+a);0<e.length&&e.animate({opacity:0},250,function(){var b=e.data("shim");void 0!= b&&b.remove();e.remove();delete y[a]})}};g.register=function(a,f){var c={id:a.attr("id"),name:a.attr("name"),type:F(a)};if(void 0!=c.name){c.name=c.name.replace(/\[\]$/,"");a.hasClass("time")&&(c.name=c.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));switch(c.type){case "radio":case "checkbox":a.bind({click:function(){g.hide_error(c.name)},blur:function(){g.hide_error(c.name)}});void 0==I[c.id]&&(I[c.id]=l.find("input[name^="+c.name+"]"));break;case "file":var e=a.clone(!0);e.attr("value",""); a.replaceWith(e);e.bind({keypress:function(){e.attr("value","")},change:function(){if(void 0!=q[c.name].rules.upload){g.hide_error(c.name);e.data("file_info")&&e.removeData("file_info");var b=jQuery('<iframe id="'+c.id+'_iframe" name="'+c.id+'_iframe">',{src:"javascript:void(0)",scrolling:"no",marginwidth:0,marginheight:0,width:0,height:0,frameborder:0,allowTransparency:"true"}).css({position:"absolute",top:0,left:-1E3});d("body").append(b);b=l.attr("action");l.attr("action",decodeURIComponent(g.settings.assets_path)+ "process.php?form="+l.attr("id")+"&control="+c.id+"&path="+encodeURIComponent(decodeURIComponent(q[c.name].rules.upload[0]))+"&nocache="+(new Date).getTime());l.attr("target",c.id+"_iframe");a.css("visibility","hidden");var f=a.offset(),f=jQuery("<div>",{id:c.id+"_spinner","class":"Zebra_Form_spinner",css:{left:f.left,top:f.top}});d("body").append(f);A=!0;l.trigger("submit");l.attr("action",b);A=!1}},blur:function(){g.hide_error(c.name)}});a=e;break;case "select-one":case "select-multiple":a.bind({change:function(){g.hide_error(c.name)}, blur:function(){g.hide_error(c.name)}});break;default:a.blur(function(){var b=c.name;if("text"==c.type&&a.hasClass("other")){var d=c.id.match(/^(.*)\_other$/);null!=d&&(b=d[1])}g.hide_error(b)})}var b=g.settings.validation_rules[c.name];if(null!=b)if(void 0==f){var p=l.find(".control");d.each(p,function(e,f){if(f==a.get(0)){d(f);for(var g=null,h=e-1;null==g&&void 0!=p[h];)g=d(p[h]).attr("id"),h--;if(q[g]){h={};for(e in q)h[e]=q[e],g==e&&(h[c.id]={element:a,rules:b});q=h}else g={},g[c.id]={element:a, rules:b},d.extend(q,g)}})}else if(void 0!=f&&d("#"+f).length){d("#"+f).attr("id");var h={};for(index in q)h[index]=q[index],previous_element_id==index&&(h[c.id]={element:a,rules:b});q=h}else void 0!=f&&!1===f&&(q[c.id]={element:a,rules:b})}};g.show_errors=function(a,f){void 0!=f&&!1===f||g.clear_errors();var c=0;for(index in q){var e=q[index],b=e.element,p={id:b.attr("id"),name:b.attr("name"),type:F(b)},h="radio"==p.type||"checkbox"==p.type?p.name.replace(/\[\]$/,""):p.id;b.hasClass("time")&&(h=p.name.replace(/\_(hours|minutes|seconds|ampm)$/, ""));if(!(void 0!=a&&a.get(0)!=b.get(0))&&void 0!=e.message&&void 0==y[h]){"none"!=b.css("display")&&(!(void 0!=f&&!1===f)&&!(g.settings.validate_all&&0<c))&&b.focus();var j=d.extend(b.offset()),j=d.extend(j,{right:Math.floor(j.left+b.width())}),n=jQuery("<div/>",{"class":"Zebra_Form_error_message",id:"Zebra_Form_error_message_"+h,css:{opacity:0}}),e=jQuery("<div/>",{"class":"message"+(!g.settings.close_tips?" noclose":""),css:{_width:"auto"}}).html(e.message).appendTo(n);g.settings.close_tips&&jQuery("<a/>", {href:"javascript:void(0)","class":"close"+("explorer"==s.name&&6==s.version?"-ie6":"")}).html("x").appendTo(e).bind({click:function(a){a.preventDefault();g.hide_error(d(this).closest("div.Zebra_Form_error_message").attr("id").replace(/^Zebra\_Form\_error\_message\_/,""),!0)},focus:function(){d(this).blur()}});var l=jQuery("<div/>",{"class":"arrow"}).appendTo(n);d("body").append(n);var m=n.outerWidth(),t=n.outerHeight(),t=l.outerWidth(),e=l.outerHeight(),k=("left"==g.settings.tips_position?j.left: j.right)-m/2;l.css("left",m/2-t/2-1);if("radio"==p.type||"checkbox"==p.type)k=j.right-m/2-b.outerWidth()/2+1;0>k&&(k=2);n.css("left",k);m=n.outerWidth();t=n.outerHeight();b=j.top-t+e/2-1;0>b&&(b=2);n.css({left:k+"px",top:b+"px",height:t-e/2+"px"});h=y[h]=n;"explorer"==s.name&&6==s.version&&!h.data("shim")&&(b=h.offset(),p=parseInt(h.css("zIndex"),10)-1,b=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowTransparency:"true","class":"Zebra_Form_error_iFrameShim", css:{zIndex:p,position:"absolute",top:b.top,left:b.left,width:h.outerWidth(),height:h.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"block"}}),d("body").append(b),h.data("shim",b));n.animate({opacity:0.9},250);1==++c&&(g.settings.scroll_to_error&&!(void 0!=f&&!1===f))&&d("html, body").animate({scrollTop:Math.max(parseInt(n.css("top"),10)+parseInt(n.css("height"),10)/2-d(window).height()/2,0)},0);if(!g.settings.validate_all)break}}};g.submit=function(){l.trigger("submit")}; g.validate_control=function(a){var f={id:a.attr("id"),name:a.attr("name"),type:F(a)},c=!0,e=q[f.id],b="radio"==f.type||"checkbox"==f.type?f.name.replace(/\[\]$/,""):f.id;a.hasClass("time")&&(b=f.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));if(void 0!=e&&("none"!=a.css("display")&&"hidden"!=a.css("visibility")||a.data("file_info"))){var p=null;delete e.message;for(var h in e.rules){if(!c)break;switch(h){case "alphabet":switch(f.type){case "password":case "text":case "textarea":var j=RegExp("^[a-z"+ D(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig");""!=d.trim(a.val())&&!j.test(a.val())&&(c=!1)}break;case "alphanumeric":switch(f.type){case "password":case "text":case "textarea":j=RegExp("^[a-z0-9"+D(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=d.trim(a.val())&&!j.test(a.val())&&(c=!1)}break;case "compare":switch(f.type){case "password":case "text":case "textarea":if(!d("#"+e.rules[h][0])||a.val()!=d("#"+e.rules[h][0]).val())c=!1}break;case "dependencies":if(!M(b))return!0;break;case "custom":var n= !1;d.each(e.rules[h],function(b,e){if(!n){e=d.merge(d.merge([e[0]],[a.val()]),e.slice(1));var f="function"==typeof e[0]?e[0]:"function"==typeof window[e[0]]?window[e[0]]:!1;if(!1!==f)c=f.apply(f,e.slice(1));else throw c=!1,Error('Function "'+e[0]+"\" doesn't exist!");c||(custom_rule_error_message=e[e.length-1],n=!0)}});break;case "date":switch(f.type){case "text":if(""!=d.trim(a.val())){for(var j=!1,l=a.data("Zebra_DatePicker").settings.format,m="dDjlNSwFmMnYyGHghaAisU".split(""),t=[],k=[],l=D(l), r=0;r<m.length;r++)-1<(position=l.indexOf(m[r]))&&t.push({character:m[r],position:position});t.sort(function(a,b){return a.position-b.position});d.each(t,function(a,b){switch(b.character){case "d":k.push("0[1-9]|[12][0-9]|3[01]");break;case "D":k.push("[a-z]{3}");break;case "j":k.push("[1-9]|[12][0-9]|3[01]");break;case "l":k.push("[a-z]+");break;case "N":k.push("[1-7]");break;case "S":k.push("st|nd|rd|th");break;case "w":k.push("[0-6]");break;case "F":k.push("[a-z]+");break;case "m":k.push("0[1-9]|1[012]+"); break;case "M":k.push("[a-z]{3}");break;case "n":k.push("[1-9]|1[012]");break;case "Y":k.push("[0-9]{4}");break;case "y":k.push("[0-9]{2}");break;case "G":k.push("[0-9]|1[0-9]|2[0-3]");break;case "H":k.push("0[0-9]|1[0-9]|2[0-3]");break;case "g":k.push("[0-9]|1[0-2]");break;case "h":k.push("0[0-9]|1[0-2]");break;case "a":case "A":k.push("(am|pm)");break;case "i":k.push("[0-5][0-9]");break;case "s":k.push("[0-5][0-9]")}});if(0<k.length&&(t.reverse(),d.each(t,function(a,b){l=l.replace(b.character,"("+ k[k.length-a-1]+")")}),k=RegExp("^"+l+"$","ig"),segments=k.exec(a.val()))){var s=null,x=null,v=null,y="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),w="January February March April May June July August September October November December".split(" "),z=null,H=!0;t.reverse();d.each(t,function(b,c){if(!H)return!0;switch(c.character){case "m":case "n":x=parseInt(segments[b+1],10);break;case "d":case "j":s=parseInt(segments[b+1],10);break;case "D":case "l":case "F":case "M":z="D"== c.character||"l"==c.character?a.data("Zebra_DatePicker").settings.days:a.data("Zebra_DatePicker").settings.months;H=!1;d.each(z,function(a,e){if(H)return!0;if(segments[b+1].toLowerCase()==e.substring(0,"D"==c.character||"M"==c.character?3:e.length).toLowerCase()){switch(c.character){case "D":segments[b+1]=y[a].substring(0,3);break;case "l":segments[b+1]=y[a];break;case "F":segments[b+1]=w[a];x=a+1;break;case "M":segments[b+1]=w[a].substring(0,3),x=a+1}H=!0}});break;case "Y":v=parseInt(segments[b+ 1],10);break;case "y":v="19"+parseInt(segments[b+1],10)}});H&&(s||(s=1),x||(x=1),m=new Date(v,x-1,s),m.getFullYear()==v&&(m.getDate()==s&&m.getMonth()==x-1)&&(a.data("timestamp",Date.parse(w[x-1]+" "+s+", "+v)),j=!0))}j||(c=!1)}}break;case "datecompare":switch(f.type){case "password":case "text":case "textarea":if(void 0!=e.rules[h][0]&&void 0!=e.rules[h][1]&&d(e.rules[h][0])&&!0===g.validate_control(d(e.rules[h][0]))&&void 0!=a.data("timestamp"))switch(e.rules[h][1]){case ">":c=a.data("timestamp")> d("#"+e.rules[h][0]).data("timestamp");break;case ">=":c=a.data("timestamp")>=d("#"+e.rules[h][0]).data("timestamp");break;case "<":c=a.data("timestamp")<d("#"+e.rules[h][0]).data("timestamp");break;case "<=":c=a.data("timestamp")<=d("#"+e.rules[h][0]).data("timestamp")}else c=!1}break;case "digits":switch(f.type){case "password":case "text":case "textarea":j=RegExp("^[0-9"+D(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=d.trim(a.val())&&!j.test(a.val())&&(c=!1)}break;case "email":switch(f.type){case "password":case "text":case "textarea":""!= d.trim(a.val())&&null==a.val().match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(c=!1)}break;case "emails":switch(f.type){case "password":case "text":case "textarea":a.val().split(",").each(function(a){""!=d.trim(a)&&null==d.trim(a).match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(c=!1)})}break;case "filesize":switch(f.type){case "file":var u=a.data("file_info");if(u&&(void 0==u[2]||void 0==u[3]|| 0!=u[2]||parseInt(u[3],10)>parseInt(e.rules[h][0],10)))c=!1}break;case "filetype":switch(f.type){case "file":if(u=a.data("file_info")){void 0==g.mimes&&d.ajax({url:decodeURIComponent(g.settings.assets_path)+"mimes.json",async:!1,success:function(a){g.mimes=a},dataType:"json"});var E=d.map(e.rules[h][0].split(","),function(a){return d.trim(a)}),A=[];d.each(g.mimes,function(a,b){(d.isArray(b)&&-1<d.inArray(u[1],b)||!d.isArray(b)&&b==u[1])&&A.push(a)});var B=!1;d.each(A,function(a,b){-1<d.inArray(b, E)&&(B=!0)});B||(c=!1)}}break;case "float":switch(f.type){case "password":case "text":case "textarea":if(j=RegExp("^[0-9-."+D(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=d.trim(a.val())&&("-"==d.trim(a.val())||"."==d.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||null!=a.val().match(/\./g)&&1<a.val().match(/\./g).length||0<a.val().indexOf("-")||!j.test(a.val())))c=!1}break;case "image":switch(f.type){case "file":(u=a.data("file_info"))&&null==u[1].match(/image\/(gif|jpeg|png|pjpeg)/i)&& (c=!1)}break;case "length":switch(f.type){case "password":case "text":case "textarea":if(""!=a.val()&&void 0!=e.rules[h][0]&&a.val().length-J(a)<e.rules[h][0]||void 0!=e.rules[h][1]&&0<e.rules[h][1]&&a.val().length-J(a)>e.rules[h][1])c=!1}break;case "number":switch(f.type){case "password":case "text":case "textarea":if(j=RegExp("^[0-9-"+D(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=d.trim(a.val())&&("-"==d.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||0<a.val().indexOf("-")|| !j.test(a.val())))c=!1}break;case "regexp":switch(f.type){case "password":case "text":case "textarea":j=RegExp(e.rules[h][0],"g"),""!=d.trim(a.val())&&null==j.exec(a.val())&&(c=!1)}break;case "required":switch(f.type){case "checkbox":case "radio":var C=!1;I[f.id].each(function(){this.checked&&(C=!0)});C||(c=!1);break;case "file":case "password":case "text":case "textarea":""==d.trim(a.val())&&(c=!1);break;case "select-one":if(a.hasClass("time")&&0==a.get(0).selectedIndex)f.id=f.id.replace(/\_(hours|minutes|seconds|ampm)$/, ""),c=!1;else if(a.hasClass("other")&&"other"==a.val()&&(!d("#"+f.id+"_other").length||""==d.trim(d("#"+f.id+"_other").val()))||0==a.get(0).selectedIndex)c=!1;break;case "select-multiple":-1==a.get(0).selectedIndex&&(c=!1)}break;case "upload":switch(f.type){case "file":if((u=a.data("file_info"))&&(!u[2]||0!=u[2]))c=!1}break;case "url":switch(f.type){case "password":case "text":case "textarea":j=RegExp("^(http(s)?://)"+(!0===e.rules[h][0]?"":"?")+"[^\\s\\.]+\\..{2,}","i"),""!=d.trim(a.val())&&!j.test(a.val())&& (c=!1)}}c||(p=h,e.message="custom"==h?custom_rule_error_message:g.settings.validation_rules[b][p][g.settings.validation_rules[b][p].length-("length"==p&&4==g.settings.validation_rules[b][p].length?2:1)],e.value=a.val())}}return c?!0:p};g.validate=function(){var a,d=!0;g.clear_errors();r={};for(index in q){if(!d&&!g.settings.validate_all)break;a=q[index].element;if(!0!==(rule_not_passed=g.validate_control(a)))d=!1}d||g.show_errors();B=!0;return d};var O=function(){d.each(E,function(){var a=d(this), f=a.data("Zebra_Form_Placeholder");""==a.val()&&!a.is(":focus")?f.css("display","block"):f.css("display","none")})},D=function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},C=function(a){if(null!=a.selectionStart)return a.selectionStart;var d=document.selection.createRange(),c=d.duplicate();if("text"==a.type)return 0-c.moveStart("character",-1E5);var e=a.value.length;c.moveToElementText(a);c.setEndPoint("StartToStart",d);return e-c.text.length},J=function(a){a=a.val();var d=a.length;return a.replace(/(\r\n|\r|\n)/g, "\r\n").length-d},K=function(a){var f=d("#"+a.attr("id")+"_other");"other"==a.val()?f.css("display","block"):f.css("display","none")},w=function(a){if(!d.isArray(a))return a;var f="";d.each(a,function(c){c=a[c];d.isArray(c)&&(c="|"+w(c)+"|");f+=""+c});return f},F=function(a){var d="button input:checkbox input:file input:image input:password input:radio input:submit input:text select textarea".split(" ");for(index in d)if(a.is(d[index]))return"select"==d[index]?a.attr("multiple")?"select-multiple": "select-one":d[index].replace(/input\:/,"")},M=function(a,f){void 0==f&&(f=[]);2<f.length&&f.shift();if(-1<d.inArray(a,f))throw Error('Infinite recursion detected. The loop of dependencies is created by the following elements: "'+f.join('", "')+'"');f.push(a);var c=g.settings.validation_rules[a].dependencies;"string"==typeof c[1]&&(c=c[0]);var e=!0,b;for(b in c){if(void 0!=r[b]&&void 0!=r[b][c[b]])e=r[b][c[b]];else{void 0!=g.settings.validation_rules[b]&&void 0!=g.settings.validation_rules[b].dependencies&& (e=M(b,f));if(e){var l=w(c[b]);if(!m[b]||!m[b].conditions[l]())e=!1}void 0==r[b]&&(r[b]={});void 0==r[b][c[b]]&&(r[b][c[b]]=e)}if(!e)break}return e};g.init()};d.fn.Zebra_Form=function(v){return this.each(function(){var z=new d.Zebra_Form(this,v);d(this).data("Zebra_Form",z)})}})(jQuery);